<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="./zepto.min.js"></script>
	<script src="jweixin-1.0.0.js"></script>
</head>
<body>
<div>eee</div>
</body>
<script type="text/javascript">
	// $.ajax({

	// 	type: 'post',
	// 	url:'/getTicket',
	// 	data: {
	// 		code: 'dev'
	// 	},
	// 	success: function(res){}
	// })
	
	// $.ajax({

	// 	type: 'post',
	// 	url:'/getsignature',
	// 	data: {
	// 		code: 'dev',
	// 		url: window.location.href.split('#')[0]
	// 	},
	// 	success: function(res){}
	// });
	$.ajax({
    // url: '/wxace/wxace/getsignature' // 
    url: '/getSignature' // 此处url请求地址需要替换成你自己实际项目中服务器数字签名服务地址
        ,
    type: 'post',
    data: {
    	code: 'dev',
        url: location.href.split('#')[0] // 将当前URL地址上传至服务器用于产生数字签名
    },
    success:function(r) {
    // 返回了数字签名对象
    r= r.data;
    console.log(r);
    console.log(r.appId);
    console.log(r.timestamp);
    console.log(r.nonceStr);
    console.log(r.signature);

    // 开始配置微信JS-SDK
    wx.config({
        debug: false,
        appId: r.appId,
        timestamp: r.timestamp,
        nonceStr: r.nonceStr,
        signature: r.signature,
        jsApiList: [
            'checkJsApi',
            'onMenuShareTimeline',//分享给好友
             'onMenuShareAppMessage'//分享到朋友圈
        ]
    });

    // 调用微信API
    wx.ready(function() {
        //alert('chenggoooooo')
        var sdata = {
            title: '那年|测试微信分享及相关API',
            title: '六一儿童节，测测你的童心值~',
	            desc: '满满的都是童年的回忆······',
	            //分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致  
	            link: 'https://wx.sumshare.cn/api/index.html',
	            imgUrl: 'http://qn.xueduoduo.com/201805291704461643.png',
            success: function() {
                alert('用户确认分享后执行的回调函数');
            },
            cancel: function() {
                alert('用户取消分享后执行的回调函数');
            }
        };
        $('#addPic').on('touchstart',function(){
            
            
        })
        wx.onMenuShareTimeline(sdata);
        wx.onMenuShareAppMessage(sdata)

        
    });
    wx.error(function(res) {
    	console.log('失败了')
        alert(res.errMsg);
    });
}
})



</script>
</html>